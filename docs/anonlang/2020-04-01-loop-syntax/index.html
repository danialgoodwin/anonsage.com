<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#FF5722 name=theme-color> <meta content="Anonsage dev blog and cheat sheets" name=Description> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.1410966418.css rel=stylesheet><link href=client/client.4edb8f75.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Loop Syntax</title><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-12i6fi0><ul class=svelte-12i6fi0><li class=svelte-12i6fi0><a class=svelte-12i6fi0 href=.>home</a></li> <li class=svelte-12i6fi0><a class=svelte-12i6fi0 href=dev rel=prefetch>dev</a></li> <li class=svelte-12i6fi0><a class=svelte-12i6fi0 href=random rel=prefetch>random</a></li> <li class=svelte-12i6fi0><a class=svelte-12i6fi0 href=anonlang rel=prefetch aria-current=page>anonlang</a></li> <li class=svelte-12i6fi0><a class=svelte-12i6fi0 href=products rel=prefetch>products</a></ul></nav> <main class=svelte-kr0vyj> <h1>Loop Syntax</h1> <small>2020-04-01</small> <div class=content><p>For the longest time, I was just planning on renaming 'for' loops and 'while' loops to just <code>loop</code> with <code>in</code> and pretty much calling it done.</p> <p>Another feature that I knew I wanted to have was to make it simple for double-loops, for example: <code>loop i, j in row, col</code>. This was easy enough to do and the syntax expanded nicely into triple-loops and more (not that it would often be used).</p> <p>Today, as I was exploring more use cases, I wanted to loop the results from transforming the first loop, for example: converting CSV to double-quoted CSV. A simple typical example would be similar to:</p> <pre class=language-javascriptreact><code>csv = <span class=hljs-string>''</span>
loop row <span class=hljs-keyword>in</span> csv.split(<span class=hljs-string>'\n'</span>):
    loop element <span class=hljs-keyword>in</span> row.split(<span class=hljs-string>','</span>):
        <span class=hljs-comment># Do somthing</span></code></pre><p><small>Side idea: <code>split()</code> for multi-line could default by new line. If single line, then default to spaces. But, I suppose that could be confusing and unexpected.</small></p> <p>But, I wanted better, and I couldn't directly use the double-loop syntax, <code>loop i, j in a1, a2</code>. I thought of various ways to accomplish this goal, maybe <code>loop csv as line, line.split()</code> or <code>loop csv to line to split()</code>. None of those looked right. Though, I finally found my favorite syntax to use:</p> <pre class=language-javascriptreact><code>csv.loop().split(<span class=hljs-string>','</span>).join(<span class=hljs-string>'","'</span>, <span class=hljs-string>'"'</span>, <span class=hljs-string>'"'</span>)
csv.split(<span class=hljs-string>'\n'</span>).split(<span class=hljs-string>','</span>).join(<span class=hljs-string>'","'</span>, <span class=hljs-string>'"'</span>, <span class=hljs-string>'"'</span>)</code></pre><p>Pros:</p> <ul> <li>Simple</li> <li>Straight to the point</li> <li>Reads in a single direction, left-to-right, without jumping around</li> <li>No unnecessary temporary (explicit) variables</li> <li>Can be procedural or generative or parallel for each step (think Python generators, Java Collections Streams, or other map-reduce)</li> </ul> <p>But, unfortunately, this exact syntax can be a little ambiguous in other use cases. For example, what if we wanted to add a word to the end of each CSV line or just append a new line at the end of the list? Both of those use cases would look like <code>csv.loop().add('...')</code>. So, we need to have a keyword that means something similar to 'for-each-element'. Unfortunately, neither 'foreach()' or 'loop()' or 'iterate()' or 'elements()' sound exactly right to me, for now. Maybe 'loop()' would be used the same way as Java's 'stream()' or another language's 'map()'. So, to remove ambiguity from above, we could do a slight change to:</p> <pre class=language-javascriptreact><code>csv.split(<span class=hljs-string>'\n'</span>).loop().split(<span class=hljs-string>','</span>).join(...).join(<span class=hljs-string>'\n'</span>)
csv.split(<span class=hljs-string>'\n'</span>).foreach().split(<span class=hljs-string>','</span>).join(...).join(<span class=hljs-string>'\n'</span>)</code></pre><p>That's all for now until I do more background research on other languages and how they handle streaming and mapping.</p> </div> <br><br><br> </main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{html:"\u003Cp\u003EFor the longest time, I was just planning on renaming &#39;for&#39; loops and &#39;while&#39; loops to just \u003Ccode\u003Eloop\u003C\u002Fcode\u003E with \u003Ccode\u003Ein\u003C\u002Fcode\u003E and pretty much calling it done.\u003C\u002Fp\u003E\n\u003Cp\u003EAnother feature that I knew I wanted to have was to make it simple for double-loops, for example: \u003Ccode\u003Eloop i, j in row, col\u003C\u002Fcode\u003E. This was easy enough to do and the syntax expanded nicely into triple-loops and more (not that it would often be used).\u003C\u002Fp\u003E\n\u003Cp\u003EToday, as I was exploring more use cases, I wanted to loop the results from transforming the first loop, for example: converting CSV to double-quoted CSV. A simple typical example would be similar to:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Ecsv = \u003Cspan class=\"hljs-string\"\u003E''\u003C\u002Fspan\u003E\nloop row \u003Cspan class=\"hljs-keyword\"\u003Ein\u003C\u002Fspan\u003E csv.split(\u003Cspan class=\"hljs-string\"\u003E'\\n'\u003C\u002Fspan\u003E):\n    loop element \u003Cspan class=\"hljs-keyword\"\u003Ein\u003C\u002Fspan\u003E row.split(\u003Cspan class=\"hljs-string\"\u003E','\u003C\u002Fspan\u003E):\n        \u003Cspan class=\"hljs-comment\"\u003E# Do somthing\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003Csmall\u003ESide idea: \u003Ccode\u003Esplit()\u003C\u002Fcode\u003E for multi-line could default by new line. If single line, then default to spaces. But, I suppose that could be confusing and unexpected.\u003C\u002Fsmall\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EBut, I wanted better, and I couldn&#39;t directly use the double-loop syntax, \u003Ccode\u003Eloop i, j in a1, a2\u003C\u002Fcode\u003E. I thought of various ways to accomplish this goal, maybe \u003Ccode\u003Eloop csv as line, line.split()\u003C\u002Fcode\u003E or \u003Ccode\u003Eloop csv to line to split()\u003C\u002Fcode\u003E. None of those looked right. Though, I finally found my favorite syntax to use:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Ecsv.loop().split(\u003Cspan class=\"hljs-string\"\u003E','\u003C\u002Fspan\u003E).join(\u003Cspan class=\"hljs-string\"\u003E'\",\"'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E'\"'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E'\"'\u003C\u002Fspan\u003E)\ncsv.split(\u003Cspan class=\"hljs-string\"\u003E'\\n'\u003C\u002Fspan\u003E).split(\u003Cspan class=\"hljs-string\"\u003E','\u003C\u002Fspan\u003E).join(\u003Cspan class=\"hljs-string\"\u003E'\",\"'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E'\"'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E'\"'\u003C\u002Fspan\u003E)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EPros:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003ESimple\u003C\u002Fli\u003E\n\u003Cli\u003EStraight to the point\u003C\u002Fli\u003E\n\u003Cli\u003EReads in a single direction, left-to-right, without jumping around\u003C\u002Fli\u003E\n\u003Cli\u003ENo unnecessary temporary (explicit) variables\u003C\u002Fli\u003E\n\u003Cli\u003ECan be procedural or generative or parallel for each step (think Python generators, Java Collections Streams, or other map-reduce)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EBut, unfortunately, this exact syntax can be a little ambiguous in other use cases. For example, what if we wanted to add a word to the end of each CSV line or just append a new line at the end of the list? Both of those use cases would look like \u003Ccode\u003Ecsv.loop().add(&#39;...&#39;)\u003C\u002Fcode\u003E. So, we need to have a keyword that means something similar to &#39;for-each-element&#39;. Unfortunately, neither &#39;foreach()&#39; or &#39;loop()&#39; or &#39;iterate()&#39; or &#39;elements()&#39; sound exactly right to me, for now. Maybe &#39;loop()&#39; would be used the same way as Java&#39;s &#39;stream()&#39; or another language&#39;s &#39;map()&#39;. So, to remove ambiguity from above, we could do a slight change to:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Ecsv.split(\u003Cspan class=\"hljs-string\"\u003E'\\n'\u003C\u002Fspan\u003E).loop().split(\u003Cspan class=\"hljs-string\"\u003E','\u003C\u002Fspan\u003E).join(...).join(\u003Cspan class=\"hljs-string\"\u003E'\\n'\u003C\u002Fspan\u003E)\ncsv.split(\u003Cspan class=\"hljs-string\"\u003E'\\n'\u003C\u002Fspan\u003E).foreach().split(\u003Cspan class=\"hljs-string\"\u003E','\u003C\u002Fspan\u003E).join(...).join(\u003Cspan class=\"hljs-string\"\u003E'\\n'\u003C\u002Fspan\u003E)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EThat&#39;s all for now until I do more background research on other languages and how they handle streaming and mapping.\u003C\u002Fp\u003E\n",title:"Loop Syntax",file:"2020-04-01-loop-syntax.md",date:"2020-04-01",slug:"2020-04-01-loop-syntax"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.4edb8f75.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.4edb8f75.js")}document.head.appendChild(s)</script> <script async data-goatcounter=https://anonsage.goatcounter.com/count src=//gc.zgo.at/count.js></script> 