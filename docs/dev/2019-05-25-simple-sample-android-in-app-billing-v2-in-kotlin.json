{"html":"<p>Over the course of a few days this week, for my side project, I implemented Android in-app billing v2 in Kotlin. It took about 5 hours to read through everything and implement it, but it should have taken less than an hour with the right sample code and walk-through.</p>\n<p>This is that walk-through that I would have wanted to just quickly implement subscription services in my app.</p>\n<p>Google, in general, has good documentation for their in-app billing, but their code sample was more helpful for me, even though it wasn&#39;t updated for the latest version of the library. There was a major version update with breaking changes that couldn&#39;t be copy-pasted into a current app.</p>\n<p>There are about ten main pages of documentation for in-app billing, but to simply get started and running, you will only need one doc page and one sample code page:</p>\n<ul>\n<li><a href=\"https://developer.android.com/google/play/billing/billing_overview\">https://developer.android.com/google/play/billing/billing_overview</a></li>\n<li><a href=\"https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/src/main/java/com/example/billingmodule/billing/BillingManager.java\">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/src/main/java/com/example/billingmodule/billing/BillingManager.java</a></li>\n</ul>\n<p>Or...</p>\n<p>I can just provide the highlights and updated code that will actually work...</p>\n<ul>\n<li>Product IDs must be unique and can NOT be reused. Product IDs must start with a lowercase letter or a number and must be composed of only lowercase letters (a-z), numbers (0-9), underscores (_), and periods (.). The product ID &#39;android.test&#39; is unavailable for use, along with all product IDs that start with &#39;android.test&#39;.</li>\n<li>Subscriptions can NOT be unpublished</li>\n<li>Subscription prices must be within a certain price range, US currently USD .99 - 400.00: <a href=\"https://support.google.com/googleplay/android-developer/table/3541286\">https://support.google.com/googleplay/android-developer/table/3541286</a></li>\n<li>The easiest way to test your purchase flow is to have testers defined in the Google Play Console &gt; Settings &gt; Developer account &gt; Account details &gt; License Testing &gt; &#39;Gmail accounts with testing access&#39;</li>\n</ul>\n<p>Code:</p>\n<ul>\n<li>Add <code>implementation &#39;com.android.billingclient:billing:2.0.0&#39;</code> in your app&#39;s build.gradle file</li>\n<li>Add <code>&lt;uses-permission android:name=&quot;com.android.vending.BILLING&quot; /&gt;</code> in your app&#39;s AndroidManifest.xml file</li>\n<li>Copy+paste this gist, then change the SKUs for your usage: <a href=\"https://gist.github.com/danialgoodwin/5bc709b19b776e707a827772401aaf96\">https://gist.github.com/danialgoodwin/5bc709b19b776e707a827772401aaf96</a> (shown below)</li>\n</ul>\n<p>{% gist user=&quot;danialgoodwin&quot; id=&quot;5bc709b19b776e707a827772401aaf96&quot; %}</p>\n<p>From &quot;0&quot; to &quot;it works on my machine&quot; :p</p>\n","title":"Simple sample of Android in-app billing v2 in Kotlin","tags":["Android","Kotlin"],"file":"2019-05-25-simple-sample-android-in-app-billing-v2-in-kotlin.md","date":"2019-05-25","slug":"2019-05-25-simple-sample-android-in-app-billing-v2-in-kotlin","next":{"slug":"2019-10-03-how-to-connect-postman-to-microsoft-azure-service-bus-via-rest","name":"How to connect Postman to Microsoft Azure Service Bus via REST"},"previous":{"slug":"2019-05-21-better-programming-language-by-effective-java","name":"Better programming language by Effective Java"}}