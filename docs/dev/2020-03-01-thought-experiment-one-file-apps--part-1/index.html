<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#FF5722 name=theme-color> <meta content="Anonsage dev blog and cheat sheets" name=Description> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.1410966418.css rel=stylesheet><link href=client/client.510a3652.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Thought Experiment: 1-File Apps (Part 1)</title><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-12i6fi0><ul class=svelte-12i6fi0><li class=svelte-12i6fi0><a href=. class=svelte-12i6fi0>home</a></li> <li class=svelte-12i6fi0><a href=dev class=svelte-12i6fi0 rel=prefetch aria-current=page>dev</a></li> <li class=svelte-12i6fi0><a href=random class=svelte-12i6fi0 rel=prefetch>random</a></li> <li class=svelte-12i6fi0><a href=anonlang class=svelte-12i6fi0 rel=prefetch>anonlang</a></li> <li class=svelte-12i6fi0><a href=products class=svelte-12i6fi0 rel=prefetch>products</a></ul></nav> <main class=svelte-kr0vyj> <h1>Thought Experiment: 1-File Apps (Part 1)</h1> <small>2020-03-01</small> <div class=content><p>Imagine a theoretical programming language that would allow us to easily create many different types of apps, each in a single file (without getting too long, as simple as possible, and no boilerplate code).</p> <p>Platforms that should be supported by this theoretical language:</p> <ul> <li>Browser extensions</li> <li>IDE plugins</li> <li>Operating system apps</li> <li>Web apps (pages)</li> <li>Mobile apps</li> <li>Console / Terminal / Shell</li> <li>Games?</li> </ul> <p>We aren't going to have something fully fleshed out today, but let's start for fun...</p> <p>At a minimum, things that every app needs (we'll add more features later):</p> <ul> <li>Title</li> <li>Description</li> <li>Author (person or company)</li> <li>Contact information</li> <li>Content<ul> <li>Media (text, images, videos, audio)</li> <li>Actions</li> <li>Styles</li> </ul> </li> </ul> <p>A simplified 1-file app could look something like the following:</p> <pre class=language-javascriptreact><code>title = My App
description = Do awesome things and stuff
author = My Name
contact = myemail@example.com
---
&lt;content here or <span class=hljs-string>'Hello, World!'</span>></code></pre><p>Now that we have that criteria listed, we can now simplify the list of needs...</p> <p>What if the author or contact information changes? We don't want to have to manually update every single app that we have created. So, perhaps a centralized location would be nice. This could be hosted by the developer console of the platform (browser, OS, mobile, package manager, ...)</p> <p>In fact, should we just remove all information that doesn't directly affect how users see and use the app? Once the app is downloaded, users need to be able to find the app by the title (at a minimum). The rest of the fields (description, author, contact) don't affect normal usage of the app. So, to simplify the overall view of our 1-file app:</p> <pre class=language-javascriptreact><code>title = My App
---
&lt;content here></code></pre><p>We really shouldn't simplify the header anymore than this. Note: This thought experiment isn't taking internationalization into account, we might want to handle all of that in a different file anyways.</p> <p>Now, about the app content. We need to show users <strong>media</strong> (text/images/video/audio) in a general <strong>layout</strong> with a default <strong>color</strong> theme defined by us developers. There's usually some <strong>interactions</strong> with the app, too. (Do we really have to define a color theme for users? That's a different discussion.) So, here's the basic one-file app layout now:</p> <pre class=language-javascriptreact><code>title = My App
---
&lt;defined media>

&lt;defined interactions>

&lt;layout>

&lt;color?></code></pre><p>We aren't going to stop here. So far, this could just be a regular HTML file, which can already be shown in just about all platforms. We are going to continue down this thought experiment to figure out what we <em>really</em> want in a simple app definition. So, for fun and a sneak peak, let's create a simple app using pseudo code rather than HTML+JavaScript+CSS. Here's a potential idea for a simple converter app:</p> <pre class=language-javascriptreact><code>title = Temperature Converter
---
define:
fahrenheit = celsius * 1.8 + 32

show:
<span class=hljs-string>'Fahrenheit: '</span> &lt;input id=fah <span class=hljs-built_in>type</span>=number <span class=hljs-built_in>bind</span>=solve(fahrenheit, celsius=cel)>
<span class=hljs-string>'Celsius: '</span> &lt;input id=cel <span class=hljs-built_in>type</span>=number <span class=hljs-built_in>bind</span>=solve(celsius, fahrenheit=fah)></code></pre><p>Here's what that could look like at a minimum:</p> <p><img alt="Simple temperature converter app" src=../dev/2020-03-01-thought-experiment-one-file-apps--temperature-converter.png title="Simple temperature converter app"></p> <p>Note: We don't need to explicitly define <code>celsius</code> because computers can easily do that algebra for us. For the 'Simply Advanced Unit Converter' Android app I made a long time ago, it had the ability to solve equations. And, there are plenty of open source libraries that solve simple (and advanced) algebra equations.</p> <details> <summary>The HTML version of the above would take about 5 times as much code to accomplish the same thing.</summary> <pre>
&lt;h1>Temperature Converter&lt;/h1>
&lt;form action="/do-conversion.php">
  &lt;label for="fah">Fahrenheit:&lt;/label>
  &lt;input type="text" id="fah" name="fah">
  &lt;label for="cel">Celsius:&lt;/label>
  &lt;input type="text" id="cel" name="cel">
  &lt;input type="submit" value="Submit">
&lt;/form></pre> </details> <p>Next, we are going to add an API call for remote data. And, to speed things up, we are also going to add local (or remote) storage, which can be used for user preferences or cache. Let's jump right in, then explain things later. The pseudo <a href=./dev/2016-01-03-code-intuitiveness>code should be intuitive</a> enough.</p> <pre class=language-javascriptreact><code>title = My TODOs
theme = Material
---
define:
storage_key = <span class=hljs-string>'tasks'</span>
pref_key = <span class=hljs-string>'user_storage_type_pref'</span>
local_storage = platform.storage
remote_storage = url(https://example.com/api/storage)
user_storage = local_storage(pref_key) otherwise remote_storage(pref_key) otherwise local_storage
get_tasks() = user_storage(storage_key) otherwise mutable_list()
tasks = get_tasks()
save_task(value) = tasks.add(value) <span class=hljs-keyword>then</span> user_storage(storage_key).add(value)
remove_task(value) = tasks.remove(value) <span class=hljs-keyword>then</span> user_storage(storage_key).remove(value)
set_user_storage_type(storage_type) = local_storage(pref_key).<span class=hljs-built_in>set</span>(storage_type) <span class=hljs-keyword>then</span> remote_storage(pref_key).<span class=hljs-built_in>set</span>(storage_type) <span class=hljs-keyword>then</span> user_storage.update() <span class=hljs-keyword>then</span> tasks.update()

show:
&lt;checkbox text=<span class=hljs-string>'Use remote storage?'</span>
    on_check=set_user_storage_type(remote_storage)
    on_uncheck=set_user_storage_type(local_storage)>
&lt;input hint=<span class=hljs-string>'Add a task'</span> on_key_enter=save_task(input.text) width=full>
&lt;list <span class=hljs-built_in>bind</span>=tasks template(task)=`&lt;checkbox on_check=remove_task(task)> task`></code></pre><p>Here's what that could look like at a minimum:</p> <p><img alt="Simple TODO list with Material theme" src=../dev/2020-03-02-thought-experiment-one-file-apps--material-todo.png title="Simple TODO list with Material theme"></p> <p>We'll go line-by-line in Part 2. This article is getting long, and there are still a lot of thoughts in my head: <a href=./dev/2020-03-02-thought-experiment-one-file-apps--part-2>Thought Experiment: One-File Apps (Part 2)</a> (Available now!)</p> <p><small>Update: I originally had the app's 'front matter' in the format of <code>title: My Title</code>, like how it is in YAML and for my blog's front matter. But, in order to have more consistency in the language, I decided to change the format to <code>title = My Title</code>. At least the pseudo code is consistent now. I just thought about turning all the <code>=</code> into <code>:</code>, but I'm not sure yet. Thoughts? Hmmm, maybe we keep using <code>=</code> for assignment, then <code>:</code> can be used for type declarations, if needed (it might be better without <code>:</code>).</small></p> </div> <br><br><br> <a href=../dev/2020-02-22-how-to-create-and-publish-a-npm-package>&lt;How to create and publish a NPM package</a> <div class=right><a href=../dev/2020-03-02-thought-experiment-one-file-apps--part-2>Thought Experiment: 1-File Apps (Part 2)></a></div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{html:"\u003Cp\u003EImagine a theoretical programming language that would allow us to easily create many different types of apps, each in a single file (without getting too long, as simple as possible, and no boilerplate code).\u003C\u002Fp\u003E\n\u003Cp\u003EPlatforms that should be supported by this theoretical language:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EBrowser extensions\u003C\u002Fli\u003E\n\u003Cli\u003EIDE plugins\u003C\u002Fli\u003E\n\u003Cli\u003EOperating system apps\u003C\u002Fli\u003E\n\u003Cli\u003EWeb apps (pages)\u003C\u002Fli\u003E\n\u003Cli\u003EMobile apps\u003C\u002Fli\u003E\n\u003Cli\u003EConsole \u002F Terminal \u002F Shell\u003C\u002Fli\u003E\n\u003Cli\u003EGames?\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EWe aren&#39;t going to have something fully fleshed out today, but let&#39;s start for fun...\u003C\u002Fp\u003E\n\u003Cp\u003EAt a minimum, things that every app needs (we&#39;ll add more features later):\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003ETitle\u003C\u002Fli\u003E\n\u003Cli\u003EDescription\u003C\u002Fli\u003E\n\u003Cli\u003EAuthor (person or company)\u003C\u002Fli\u003E\n\u003Cli\u003EContact information\u003C\u002Fli\u003E\n\u003Cli\u003EContent\u003Cul\u003E\n\u003Cli\u003EMedia (text, images, videos, audio)\u003C\u002Fli\u003E\n\u003Cli\u003EActions\u003C\u002Fli\u003E\n\u003Cli\u003EStyles\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EA simplified 1-file app could look something like the following:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Etitle = My App\ndescription = Do awesome things and stuff\nauthor = My Name\ncontact = myemail@example.com\n---\n&lt;content here or \u003Cspan class=\"hljs-string\"\u003E'Hello, World!'\u003C\u002Fspan\u003E&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ENow that we have that criteria listed, we can now simplify the list of needs...\u003C\u002Fp\u003E\n\u003Cp\u003EWhat if the author or contact information changes? We don&#39;t want to have to manually update every single app that we have created. So, perhaps a centralized location would be nice. This could be hosted by the developer console of the platform (browser, OS, mobile, package manager, ...)\u003C\u002Fp\u003E\n\u003Cp\u003EIn fact, should we just remove all information that doesn&#39;t directly affect how users see and use the app? Once the app is downloaded, users need to be able to find the app by the title (at a minimum). The rest of the fields (description, author, contact) don&#39;t affect normal usage of the app. So, to simplify the overall view of our 1-file app:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Etitle = My App\n---\n&lt;content here&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EWe really shouldn&#39;t simplify the header anymore than this. Note: This thought experiment isn&#39;t taking internationalization into account, we might want to handle all of that in a different file anyways.\u003C\u002Fp\u003E\n\u003Cp\u003ENow, about the app content. We need to show users \u003Cstrong\u003Emedia\u003C\u002Fstrong\u003E (text\u002Fimages\u002Fvideo\u002Faudio) in a general \u003Cstrong\u003Elayout\u003C\u002Fstrong\u003E with a default \u003Cstrong\u003Ecolor\u003C\u002Fstrong\u003E theme defined by us developers. There&#39;s usually some \u003Cstrong\u003Einteractions\u003C\u002Fstrong\u003E with the app, too. (Do we really have to define a color theme for users? That&#39;s a different discussion.) So, here&#39;s the basic one-file app layout now:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Etitle = My App\n---\n&lt;defined media&gt;\n\n&lt;defined interactions&gt;\n\n&lt;layout&gt;\n\n&lt;color?&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EWe aren&#39;t going to stop here. So far, this could just be a regular HTML file, which can already be shown in just about all platforms. We are going to continue down this thought experiment to figure out what we \u003Cem\u003Ereally\u003C\u002Fem\u003E want in a simple app definition. So, for fun and a sneak peak, let&#39;s create a simple app using pseudo code rather than HTML+JavaScript+CSS. Here&#39;s a potential idea for a simple converter app:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Etitle = Temperature Converter\n---\ndefine:\nfahrenheit = celsius * 1.8 + 32\n\nshow:\n\u003Cspan class=\"hljs-string\"\u003E'Fahrenheit: '\u003C\u002Fspan\u003E &lt;input id=fah \u003Cspan class=\"hljs-built_in\"\u003Etype\u003C\u002Fspan\u003E=number \u003Cspan class=\"hljs-built_in\"\u003Ebind\u003C\u002Fspan\u003E=solve(fahrenheit, celsius=cel)&gt;\n\u003Cspan class=\"hljs-string\"\u003E'Celsius: '\u003C\u002Fspan\u003E &lt;input id=cel \u003Cspan class=\"hljs-built_in\"\u003Etype\u003C\u002Fspan\u003E=number \u003Cspan class=\"hljs-built_in\"\u003Ebind\u003C\u002Fspan\u003E=solve(celsius, fahrenheit=fah)&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EHere&#39;s what that could look like at a minimum:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"..\u002Fdev\u002F2020-03-01-thought-experiment-one-file-apps--temperature-converter.png\" alt=\"Simple temperature converter app\" title=\"Simple temperature converter app\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENote: We don&#39;t need to explicitly define \u003Ccode\u003Ecelsius\u003C\u002Fcode\u003E because computers can easily do that algebra for us. For the &#39;Simply Advanced Unit Converter&#39; Android app I made a long time ago, it had the ability to solve equations. And, there are plenty of open source libraries that solve simple (and advanced) algebra equations.\u003C\u002Fp\u003E\n\u003Cdetails\u003E\n  \u003Csummary\u003EThe HTML version of the above would take about 5 times as much code to accomplish the same thing.\u003C\u002Fsummary\u003E\n  \u003Cpre\u003E\n&lt;h1\u003ETemperature Converter&lt;\u002Fh1\u003E\n&lt;form action=\"\u002Fdo-conversion.php\"\u003E\n  &lt;label for=\"fah\"\u003EFahrenheit:&lt;\u002Flabel\u003E\n  &lt;input type=\"text\" id=\"fah\" name=\"fah\"\u003E\n  &lt;label for=\"cel\"\u003ECelsius:&lt;\u002Flabel\u003E\n  &lt;input type=\"text\" id=\"cel\" name=\"cel\"\u003E\n  &lt;input type=\"submit\" value=\"Submit\"\u003E\n&lt;\u002Fform\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdetails\u003E\n\n\u003Cp\u003ENext, we are going to add an API call for remote data. And, to speed things up, we are also going to add local (or remote) storage, which can be used for user preferences or cache. Let&#39;s jump right in, then explain things later. The pseudo \u003Ca href=\".\u002Fdev\u002F2016-01-03-code-intuitiveness\"\u003Ecode should be intuitive\u003C\u002Fa\u003E enough.\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Etitle = My TODOs\ntheme = Material\n---\ndefine:\nstorage_key = \u003Cspan class=\"hljs-string\"\u003E'tasks'\u003C\u002Fspan\u003E\npref_key = \u003Cspan class=\"hljs-string\"\u003E'user_storage_type_pref'\u003C\u002Fspan\u003E\nlocal_storage = platform.storage\nremote_storage = url(https:\u002F\u002Fexample.com\u002Fapi\u002Fstorage)\nuser_storage = local_storage(pref_key) otherwise remote_storage(pref_key) otherwise local_storage\nget_tasks() = user_storage(storage_key) otherwise mutable_list()\ntasks = get_tasks()\nsave_task(value) = tasks.add(value) \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E user_storage(storage_key).add(value)\nremove_task(value) = tasks.remove(value) \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E user_storage(storage_key).remove(value)\nset_user_storage_type(storage_type) = local_storage(pref_key).\u003Cspan class=\"hljs-built_in\"\u003Eset\u003C\u002Fspan\u003E(storage_type) \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E remote_storage(pref_key).\u003Cspan class=\"hljs-built_in\"\u003Eset\u003C\u002Fspan\u003E(storage_type) \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E user_storage.update() \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E tasks.update()\n\nshow:\n&lt;checkbox text=\u003Cspan class=\"hljs-string\"\u003E'Use remote storage?'\u003C\u002Fspan\u003E\n    on_check=set_user_storage_type(remote_storage)\n    on_uncheck=set_user_storage_type(local_storage)&gt;\n&lt;input hint=\u003Cspan class=\"hljs-string\"\u003E'Add a task'\u003C\u002Fspan\u003E on_key_enter=save_task(input.text) width=full&gt;\n&lt;list \u003Cspan class=\"hljs-built_in\"\u003Ebind\u003C\u002Fspan\u003E=tasks template(task)=`&lt;checkbox on_check=remove_task(task)&gt; task`&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EHere&#39;s what that could look like at a minimum:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"..\u002Fdev\u002F2020-03-02-thought-experiment-one-file-apps--material-todo.png\" alt=\"Simple TODO list with Material theme\" title=\"Simple TODO list with Material theme\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EWe&#39;ll go line-by-line in Part 2. This article is getting long, and there are still a lot of thoughts in my head: \u003Ca href=\".\u002Fdev\u002F2020-03-02-thought-experiment-one-file-apps--part-2\"\u003EThought Experiment: One-File Apps (Part 2)\u003C\u002Fa\u003E (Available now!)\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Csmall\u003EUpdate: I originally had the app&#39;s &#39;front matter&#39; in the format of \u003Ccode\u003Etitle: My Title\u003C\u002Fcode\u003E, like how it is in YAML and for my blog&#39;s front matter. But, in order to have more consistency in the language, I decided to change the format to \u003Ccode\u003Etitle = My Title\u003C\u002Fcode\u003E. At least the pseudo code is consistent now. I just thought about turning all the \u003Ccode\u003E=\u003C\u002Fcode\u003E into \u003Ccode\u003E:\u003C\u002Fcode\u003E, but I&#39;m not sure yet. Thoughts? Hmmm, maybe we keep using \u003Ccode\u003E=\u003C\u002Fcode\u003E for assignment, then \u003Ccode\u003E:\u003C\u002Fcode\u003E can be used for type declarations, if needed (it might be better without \u003Ccode\u003E:\u003C\u002Fcode\u003E).\u003C\u002Fsmall\u003E\u003C\u002Fp\u003E\n",title:"Thought Experiment: 1-File Apps (Part 1)",tags:["Thought Experiment","Dev Design"],file:"2020-03-01-thought-experiment-one-file-apps--part-1.md",date:"2020-03-01",slug:"2020-03-01-thought-experiment-one-file-apps--part-1",next:{slug:"2020-03-02-thought-experiment-one-file-apps--part-2",name:"Thought Experiment: 1-File Apps (Part 2)"},previous:{slug:"2020-02-22-how-to-create-and-publish-a-npm-package",name:"How to create and publish a NPM package"}}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.510a3652.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.510a3652.js")}document.head.appendChild(s)</script> <script async data-goatcounter=https://anonsage.goatcounter.com/count src=//gc.zgo.at/count.js></script> 