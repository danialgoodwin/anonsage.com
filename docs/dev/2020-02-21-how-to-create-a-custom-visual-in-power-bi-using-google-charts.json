{"html":"<p>Let jump right in! Here&#39;s the minimal steps to get Google Charts showing in a Power BI custom visual...</p>\n<p>The main Microsoft Power BI resource that I used for learning how to create custom visuals: <a href=\"https://docs.microsoft.com/en-us/power-bi/developer/visuals/custom-visual-develop-tutorial\">https://docs.microsoft.com/en-us/power-bi/developer/visuals/custom-visual-develop-tutorial</a></p>\n<ol>\n<li><p>There&#39;s a lot of good information on that page. So the first step is to complete the one-time setup in the &#39;Prerequisites&#39; section and the &#39;Setting up the developer environment&#39; section there.</p>\n<ul>\n<li>Note: The &#39;certificate&#39; step isn&#39;t strictly required, but it makes development and testing A LOT faster. Basically, Power BI can do live refreshes rather than you having to manually import the PBVIZ file for each change. These steps are assuming that the certificate is installed.</li>\n</ul>\n</li>\n<li><p>Sidenote: I was going to write my own summary here, but the linked page is really good and will include pictures that I won&#39;t include.</p>\n</li>\n<li><p>In the <a href=\"https://docs.microsoft.com/en-us/power-bi/developer/visuals/custom-visual-develop-tutorial#creating-a-custom-visual\">custom visual tutorial</a>, complete the section &#39;Creating a custom visual&#39;</p>\n<ul>\n<li>The next section on that tutorial page, &#39;Adding visual elements&#39;, can be skipped because that uses the d3.js library.</li>\n</ul>\n</li>\n<li><p>(Finally) <strong>Add Google Charts to Power BI custom visual</strong>:</p>\n<ol>\n<li><p>Run: <code>npm i google-charts</code></p>\n</li>\n<li><p>In &#39;src/visual.ts&#39;:</p>\n<ol>\n<li><p>Add: <code>import { GoogleCharts } from &#39;google-charts&#39;</code></p>\n</li>\n<li><p>Replace the class with the following:</p>\n<pre class='language-javascriptreact'><code> <span class=\"hljs-keyword\">export</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Visual</span> <span class=\"hljs-title\">implements</span> <span class=\"hljs-title\">IVisual</span> </span>{\n     private target: HTMLElement\n\n     <span class=\"hljs-keyword\">constructor</span>(options: VisualConstructorOptions) {\n         <span class=\"hljs-keyword\">this</span>.target = options.element\n     }\n\n     public update(options: VisualUpdateOptions) {\n         GoogleCharts.load(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n             <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">new</span> GoogleCharts.api.visualization.DataTable()\n             data.addColumn(<span class=\"hljs-string\">'number'</span>, <span class=\"hljs-string\">'X-Axis Timeline'</span>)\n             data.addColumn(<span class=\"hljs-string\">'number'</span>, <span class=\"hljs-string\">'Things'</span>)\n             data.addColumn(<span class=\"hljs-string\">'number'</span>, <span class=\"hljs-string\">'Stuff'</span>)\n             data.addRows([\n                 [<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>],    [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">5</span>],   [<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">15</span>],  [<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">9</span>],   [<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">18</span>, <span class=\"hljs-number\">10</span>],  [<span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">5</span>],\n                 [<span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">3</span>],   [<span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">19</span>],  [<span class=\"hljs-number\">8</span>, <span class=\"hljs-number\">33</span>, <span class=\"hljs-number\">25</span>],  [<span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">40</span>, <span class=\"hljs-number\">32</span>],  [<span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">32</span>, <span class=\"hljs-number\">24</span>], [<span class=\"hljs-number\">11</span>, <span class=\"hljs-number\">35</span>, <span class=\"hljs-number\">27</span>],\n                 [<span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">30</span>, <span class=\"hljs-number\">22</span>], [<span class=\"hljs-number\">13</span>, <span class=\"hljs-number\">40</span>, <span class=\"hljs-number\">32</span>], [<span class=\"hljs-number\">14</span>, <span class=\"hljs-number\">42</span>, <span class=\"hljs-number\">34</span>], [<span class=\"hljs-number\">15</span>, <span class=\"hljs-number\">47</span>, <span class=\"hljs-number\">39</span>], [<span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">44</span>, <span class=\"hljs-number\">36</span>], [<span class=\"hljs-number\">17</span>, <span class=\"hljs-number\">48</span>, <span class=\"hljs-number\">40</span>],\n                 [<span class=\"hljs-number\">18</span>, <span class=\"hljs-number\">52</span>, <span class=\"hljs-number\">44</span>], [<span class=\"hljs-number\">19</span>, <span class=\"hljs-number\">54</span>, <span class=\"hljs-number\">46</span>], [<span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">42</span>, <span class=\"hljs-number\">34</span>], [<span class=\"hljs-number\">21</span>, <span class=\"hljs-number\">55</span>, <span class=\"hljs-number\">47</span>], [<span class=\"hljs-number\">22</span>, <span class=\"hljs-number\">56</span>, <span class=\"hljs-number\">48</span>], [<span class=\"hljs-number\">23</span>, <span class=\"hljs-number\">57</span>, <span class=\"hljs-number\">49</span>],\n                 [<span class=\"hljs-number\">24</span>, <span class=\"hljs-number\">60</span>, <span class=\"hljs-number\">52</span>], [<span class=\"hljs-number\">25</span>, <span class=\"hljs-number\">50</span>, <span class=\"hljs-number\">42</span>], [<span class=\"hljs-number\">26</span>, <span class=\"hljs-number\">52</span>, <span class=\"hljs-number\">44</span>], [<span class=\"hljs-number\">27</span>, <span class=\"hljs-number\">51</span>, <span class=\"hljs-number\">43</span>], [<span class=\"hljs-number\">28</span>, <span class=\"hljs-number\">49</span>, <span class=\"hljs-number\">41</span>], [<span class=\"hljs-number\">29</span>, <span class=\"hljs-number\">53</span>, <span class=\"hljs-number\">45</span>],\n                 [<span class=\"hljs-number\">30</span>, <span class=\"hljs-number\">55</span>, <span class=\"hljs-number\">47</span>], [<span class=\"hljs-number\">31</span>, <span class=\"hljs-number\">60</span>, <span class=\"hljs-number\">52</span>], [<span class=\"hljs-number\">32</span>, <span class=\"hljs-number\">61</span>, <span class=\"hljs-number\">53</span>], [<span class=\"hljs-number\">33</span>, <span class=\"hljs-number\">59</span>, <span class=\"hljs-number\">51</span>], [<span class=\"hljs-number\">34</span>, <span class=\"hljs-number\">62</span>, <span class=\"hljs-number\">54</span>], [<span class=\"hljs-number\">35</span>, <span class=\"hljs-number\">65</span>, <span class=\"hljs-number\">57</span>],\n                 [<span class=\"hljs-number\">36</span>, <span class=\"hljs-number\">62</span>, <span class=\"hljs-number\">54</span>], [<span class=\"hljs-number\">37</span>, <span class=\"hljs-number\">58</span>, <span class=\"hljs-number\">50</span>], [<span class=\"hljs-number\">38</span>, <span class=\"hljs-number\">55</span>, <span class=\"hljs-number\">47</span>], [<span class=\"hljs-number\">39</span>, <span class=\"hljs-number\">61</span>, <span class=\"hljs-number\">53</span>], [<span class=\"hljs-number\">40</span>, <span class=\"hljs-number\">64</span>, <span class=\"hljs-number\">56</span>], [<span class=\"hljs-number\">41</span>, <span class=\"hljs-number\">65</span>, <span class=\"hljs-number\">57</span>],\n                 [<span class=\"hljs-number\">42</span>, <span class=\"hljs-number\">63</span>, <span class=\"hljs-number\">55</span>], [<span class=\"hljs-number\">43</span>, <span class=\"hljs-number\">66</span>, <span class=\"hljs-number\">58</span>], [<span class=\"hljs-number\">44</span>, <span class=\"hljs-number\">67</span>, <span class=\"hljs-number\">59</span>], [<span class=\"hljs-number\">45</span>, <span class=\"hljs-number\">69</span>, <span class=\"hljs-number\">61</span>], [<span class=\"hljs-number\">46</span>, <span class=\"hljs-number\">69</span>, <span class=\"hljs-number\">61</span>], [<span class=\"hljs-number\">47</span>, <span class=\"hljs-number\">70</span>, <span class=\"hljs-number\">62</span>],\n                 [<span class=\"hljs-number\">48</span>, <span class=\"hljs-number\">72</span>, <span class=\"hljs-number\">64</span>], [<span class=\"hljs-number\">49</span>, <span class=\"hljs-number\">68</span>, <span class=\"hljs-number\">60</span>], [<span class=\"hljs-number\">50</span>, <span class=\"hljs-number\">66</span>, <span class=\"hljs-number\">58</span>], [<span class=\"hljs-number\">51</span>, <span class=\"hljs-number\">65</span>, <span class=\"hljs-number\">57</span>], [<span class=\"hljs-number\">52</span>, <span class=\"hljs-number\">67</span>, <span class=\"hljs-number\">59</span>], [<span class=\"hljs-number\">53</span>, <span class=\"hljs-number\">70</span>, <span class=\"hljs-number\">62</span>],\n                 [<span class=\"hljs-number\">54</span>, <span class=\"hljs-number\">71</span>, <span class=\"hljs-number\">63</span>], [<span class=\"hljs-number\">55</span>, <span class=\"hljs-number\">72</span>, <span class=\"hljs-number\">64</span>], [<span class=\"hljs-number\">56</span>, <span class=\"hljs-number\">73</span>, <span class=\"hljs-number\">65</span>], [<span class=\"hljs-number\">57</span>, <span class=\"hljs-number\">75</span>, <span class=\"hljs-number\">67</span>], [<span class=\"hljs-number\">58</span>, <span class=\"hljs-number\">70</span>, <span class=\"hljs-number\">62</span>], [<span class=\"hljs-number\">59</span>, <span class=\"hljs-number\">68</span>, <span class=\"hljs-number\">60</span>],\n                 [<span class=\"hljs-number\">60</span>, <span class=\"hljs-number\">64</span>, <span class=\"hljs-number\">56</span>], [<span class=\"hljs-number\">61</span>, <span class=\"hljs-number\">60</span>, <span class=\"hljs-number\">52</span>], [<span class=\"hljs-number\">62</span>, <span class=\"hljs-number\">65</span>, <span class=\"hljs-number\">57</span>], [<span class=\"hljs-number\">63</span>, <span class=\"hljs-number\">67</span>, <span class=\"hljs-number\">59</span>], [<span class=\"hljs-number\">64</span>, <span class=\"hljs-number\">68</span>, <span class=\"hljs-number\">60</span>], [<span class=\"hljs-number\">65</span>, <span class=\"hljs-number\">69</span>, <span class=\"hljs-number\">61</span>],\n                 [<span class=\"hljs-number\">66</span>, <span class=\"hljs-number\">70</span>, <span class=\"hljs-number\">62</span>], [<span class=\"hljs-number\">67</span>, <span class=\"hljs-number\">72</span>, <span class=\"hljs-number\">64</span>], [<span class=\"hljs-number\">68</span>, <span class=\"hljs-number\">75</span>, <span class=\"hljs-number\">67</span>], [<span class=\"hljs-number\">69</span>, <span class=\"hljs-number\">80</span>, <span class=\"hljs-number\">72</span>]\n             ])\n             <span class=\"hljs-keyword\">const</span> options = {\n                 <span class=\"hljs-attr\">chart</span>: {\n                     <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">'Things vs Stuff'</span>\n                 },\n                 <span class=\"hljs-attr\">hAxis</span>: {\n                     <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">'Time'</span>\n                 },\n                 <span class=\"hljs-attr\">vAxis</span>: {\n                     <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">'Popularity'</span>\n                 },\n                 <span class=\"hljs-attr\">legend</span>: {\n                     <span class=\"hljs-attr\">position</span>: <span class=\"hljs-string\">'bottom'</span>\n                 }\n             }\n             <span class=\"hljs-keyword\">const</span> chart = <span class=\"hljs-keyword\">new</span> GoogleCharts.api.visualization.LineChart(<span class=\"hljs-keyword\">this</span>.target);\n             chart.draw(data, options);\n         })\n     }\n\n     <span class=\"hljs-comment\">/**\n      * This function gets called for each of the objects defined in the capabilities files and allows you to select which of the\n      * objects and properties you want to expose to the users in the property pane.\n      */</span>\n     public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstance[] | VisualObjectInstanceEnumerationObject {\n         <span class=\"hljs-keyword\">return</span> VisualSettings.enumerateObjectInstances(VisualSettings.getDefault(), options);\n     }\n }</code></pre></li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>In your Power BI report, refresh the developer visual, and see that the Google Charts are showing!</p>\n<ul>\n<li>Note: The <code>pbiviz start</code> output mentions &#39;<a href=\"https://localhost:8080/webpack-dev-server/&#39;\">https://localhost:8080/webpack-dev-server/&#39;</a>, but that only shows a directory, and not the actual chart.</li>\n</ul>\n</li>\n<li><p>To load data from Power BI rather than locally, please continue with Microsoft&#39;s walkthrough, <a href=\"https://docs.microsoft.com/en-us/power-bi/developer/visuals/custom-visual-develop-tutorial#process-data-in-the-visual-code\">Process data in the visual code</a></p>\n</li>\n</ol>\n<h2 id=\"bonus\">Bonus</h2>\n<p>If you want to add a nice border around your chart, then use something similar to this:</p>\n<pre class='language-javascriptreact'><code>private readonly chartElement: HTMLElement\n\n<span class=\"hljs-keyword\">constructor</span>(options: VisualConstructorOptions) {\n    <span class=\"hljs-keyword\">const</span> target = options.element\n    <span class=\"hljs-keyword\">this</span>.chartElement = <span class=\"hljs-built_in\">document</span>.createElement(<span class=\"hljs-string\">'div'</span>);\n    <span class=\"hljs-keyword\">this</span>.chartElement.style.border = <span class=\"hljs-string\">\"1px solid rgba(0,0,0,.125)\"</span>\n    <span class=\"hljs-keyword\">this</span>.chartElement.style.boxShadow = <span class=\"hljs-string\">\"0 1px 2px 0 rgba(0, 0, 0, 0.2)\"</span>\n    <span class=\"hljs-keyword\">this</span>.chartElement.style.borderRadius = <span class=\"hljs-string\">\"4px\"</span>\n    <span class=\"hljs-keyword\">this</span>.chartElement.style.padding = <span class=\"hljs-string\">\"30px\"</span>\n    target.appendChild(<span class=\"hljs-keyword\">this</span>.chartElement)\n}</code></pre>","title":"How to create a custom visual in Power BI using Google Charts","tags":["Power BI","JavaScript"],"file":"2020-02-21-how-to-create-a-custom-visual-in-power-bi-using-google-charts.md","date":"2020-02-21","slug":"2020-02-21-how-to-create-a-custom-visual-in-power-bi-using-google-charts","next":{"slug":"2020-02-22-how-to-create-and-publish-a-npm-package","name":"How to create and publish a NPM package"},"previous":{"slug":"2019-10-03-how-to-connect-postman-to-microsoft-azure-service-bus-via-rest","name":"How to connect Postman to Microsoft Azure Service Bus via REST"}}