<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#FF5722 name=theme-color> <meta content="Anonsage dev blog and cheat sheets" name=Description> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.2026142863.css rel=stylesheet><link href=client/[slug].137a5722.css rel=stylesheet><link href=client/client.709153bd.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Thought Experiment: 1-File Apps (Part 2)</title><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-12i6fi0><ul class=svelte-12i6fi0><li class=svelte-12i6fi0><a href=. class=svelte-12i6fi0>home</a></li> <li class=svelte-12i6fi0><a href=dev class=svelte-12i6fi0 rel=prefetch aria-current=page>dev</a></li> <li class=svelte-12i6fi0><a href=random class=svelte-12i6fi0 rel=prefetch>random</a></ul></nav> <main class=svelte-x6rnam> <h1>Thought Experiment: 1-File Apps (Part 2)</h1> <small>2020-03-02</small> <div class="content svelte-t3subx"><p><em>You should read <a href=./dev/2020-03-01-thought-experiment-one-file-apps--part-1>Thought Experiment: One-File Apps (Part 1)</a> so that you know what this article is about.</em></p> <p>But, here's a quick summary of Part 1 anyways: We're imagining a theoretical programming language that simplifies as much boilerplate code as possible so that we can easily create apps in a single file, or page, or screen.</p> <p>We are now going to continue from Part 1, where we just said that we are going to implement an API call and local (and remote) storage. It will be explained line-by-line (ish) after the code, which <a href=./dev/2016-01-03-code-intuitiveness>should be intuitive</a> enough. Basically, the user here has the ability to use either local storage or remote storage for their TODO list.</p> <pre class=language-javascriptreact><code>title = My TODOs
theme = Material
---
define:
storage_key = <span class=hljs-string>'tasks'</span>
pref_key = <span class=hljs-string>'user_storage_type_pref'</span>
local_storage = platform.storage
remote_storage = url(https://example.com/api/storage)
user_storage = local_storage(pref_key) otherwise remote_storage(pref_key) otherwise local_storage
get_tasks() = user_storage(storage_key) otherwise mutable_list()
tasks = get_tasks()
save_task(value) = tasks.add(value) <span class=hljs-keyword>then</span> user_storage(storage_key).add(value)
remove_task(value) = tasks.remove(value) <span class=hljs-keyword>then</span> user_storage(storage_key).remove(value)
set_user_storage_type(storage_type) = local_storage(pref_key).<span class=hljs-built_in>set</span>(storage_type)
        <span class=hljs-keyword>then</span> remote_storage(pref_key).<span class=hljs-built_in>set</span>(storage_type) <span class=hljs-keyword>then</span> user_storage.update() <span class=hljs-keyword>then</span> tasks.update()

show:
&lt;checkbox text=<span class=hljs-string>'Use remote storage?'</span>
    on_check=set_user_storage_type(remote_storage)
    on_uncheck=set_user_storage_type(local_storage)>
&lt;input hint=<span class=hljs-string>'Add a task'</span> on_key_enter=save_task(input.text) width=full>
&lt;list <span class=hljs-built_in>bind</span>=tasks template(task)=`&lt;checkbox text=task on_check=remove_task(task)`></code></pre><p>Here's what that could look like at a minimum:</p> <p><img alt="Simple TODO list with Material theme" src=../dev/2020-03-02-thought-experiment-one-file-apps--material-todo.png title="Simple TODO list with Material theme"></p> <p>Let's now look the above code one line (ish) at a time:</p> <ul> <li><code>theme: Material</code> is styling referencing a set of style handled by the platform. We could probably do something like <code>Material(orange, black)</code> to set the primary and secondary colors for our app. Or, we would just accept the defaults provided by the platform or user.</li> <li><code>local_storage = platform.storage</code> gets the local storage type specific for that platform. <code>platform</code> is a keyword here.</li> <li>Both <code>local_storage</code> and <code>remote_storage</code> would have the same interface/API</li> <li>The <code>otherwise</code> keyword is similar to JavaScript's syntactic sugar for 'otherwise', aka <code>x = value || defaultValue</code>. This is also a lot easier to read than other languages' <code>x = storage.get(key, 'default value')'</code></li> <li>The <code>then</code> keyword is similar to bash's syntactic sugar for 'then execute the following statement if the previous condition returns true', aka <code>&&</code>. This is also somewhat similar to JavaScript's Promise that uses <code>.then(...)</code>.</li> <li><code>tasks.update()</code> will recalculate the variable's value. We bind to <code>tasks</code> changes in <code>&lt;list></code></li> <li>The last line with <code>template(task)=...</code> has an input value for the <code>template</code> <em>attribute</em>, which comes from the binded <code>tasks</code>. This automatically knows to iterates through <code>tasks</code> because it is in a <code>list</code> <em>view</em>.</li> <li>As I was playing around, I really liked the feel of <code>storage(key).add(value)</code> compared to my first thought of <code>storage.append(key, value)</code>. We can now keep the verbs limited and more simple and matching the style of other data structures like list and set.</li> </ul> <p>There is plenty more that we would want in an app like this, and I would expect the platform to handle most of it.</p> <p>For example, <strong>permissions</strong> for accessing the internet can easily be handled by the platform. So, I didn't have to explicitly code anything related to that.</p> <p>The platform could easily handle <strong>themes</strong> too, like light and dark mode, or whatever custom colors that the user chooses.</p> <p>Future thought experiments about this Anonsage language include:</p> <ul> <li>Multi-page</li> <li>Further integration of logic and UI. We don't actually need <code>define:</code> and <code>show:</code> in the above code. I just put those labels there to potentially help understand the code faster.</li> </ul> <p>I've spent enough time on this thought experiment yesterday and today. I will eventually return to this topic. And, if I hear feedback, then that will likely motivate me to think about this again sooner. Let me know if there are any other app examples that you would like to see in the Anonsage language. ;) </p> <p>Interested in learning more about this Anonsage language? <a href=./dev>Click here</a></p> </div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{html:"\u003Cp\u003E\u003Cem\u003EYou should read \u003Ca href=\".\u002Fdev\u002F2020-03-01-thought-experiment-one-file-apps--part-1\"\u003EThought Experiment: One-File Apps (Part 1)\u003C\u002Fa\u003E so that you know what this article is about.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EBut, here&#39;s a quick summary of Part 1 anyways: We&#39;re imagining a theoretical programming language that simplifies as much boilerplate code as possible so that we can easily create apps in a single file, or page, or screen.\u003C\u002Fp\u003E\n\u003Cp\u003EWe are now going to continue from Part 1, where we just said that we are going to implement an API call and local (and remote) storage. It will be explained line-by-line (ish) after the code, which \u003Ca href=\".\u002Fdev\u002F2016-01-03-code-intuitiveness\"\u003Eshould be intuitive\u003C\u002Fa\u003E enough. Basically, the user here has the ability to use either local storage or remote storage for their TODO list.\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Etitle = My TODOs\ntheme = Material\n---\ndefine:\nstorage_key = \u003Cspan class=\"hljs-string\"\u003E'tasks'\u003C\u002Fspan\u003E\npref_key = \u003Cspan class=\"hljs-string\"\u003E'user_storage_type_pref'\u003C\u002Fspan\u003E\nlocal_storage = platform.storage\nremote_storage = url(https:\u002F\u002Fexample.com\u002Fapi\u002Fstorage)\nuser_storage = local_storage(pref_key) otherwise remote_storage(pref_key) otherwise local_storage\nget_tasks() = user_storage(storage_key) otherwise mutable_list()\ntasks = get_tasks()\nsave_task(value) = tasks.add(value) \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E user_storage(storage_key).add(value)\nremove_task(value) = tasks.remove(value) \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E user_storage(storage_key).remove(value)\nset_user_storage_type(storage_type) = local_storage(pref_key).\u003Cspan class=\"hljs-built_in\"\u003Eset\u003C\u002Fspan\u003E(storage_type)\n        \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E remote_storage(pref_key).\u003Cspan class=\"hljs-built_in\"\u003Eset\u003C\u002Fspan\u003E(storage_type) \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E user_storage.update() \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E tasks.update()\n\nshow:\n&lt;checkbox text=\u003Cspan class=\"hljs-string\"\u003E'Use remote storage?'\u003C\u002Fspan\u003E\n    on_check=set_user_storage_type(remote_storage)\n    on_uncheck=set_user_storage_type(local_storage)&gt;\n&lt;input hint=\u003Cspan class=\"hljs-string\"\u003E'Add a task'\u003C\u002Fspan\u003E on_key_enter=save_task(input.text) width=full&gt;\n&lt;list \u003Cspan class=\"hljs-built_in\"\u003Ebind\u003C\u002Fspan\u003E=tasks template(task)=`&lt;checkbox text=task on_check=remove_task(task)`&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EHere&#39;s what that could look like at a minimum:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"..\u002Fdev\u002F2020-03-02-thought-experiment-one-file-apps--material-todo.png\" alt=\"Simple TODO list with Material theme\" title=\"Simple TODO list with Material theme\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ELet&#39;s now look the above code one line (ish) at a time:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Etheme: Material\u003C\u002Fcode\u003E is styling referencing a set of style handled by the platform. We could probably do something like \u003Ccode\u003EMaterial(orange, black)\u003C\u002Fcode\u003E to set the primary and secondary colors for our app. Or, we would just accept the defaults provided by the platform or user.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Elocal_storage = platform.storage\u003C\u002Fcode\u003E gets the local storage type specific for that platform. \u003Ccode\u003Eplatform\u003C\u002Fcode\u003E is a keyword here.\u003C\u002Fli\u003E\n\u003Cli\u003EBoth \u003Ccode\u003Elocal_storage\u003C\u002Fcode\u003E and \u003Ccode\u003Eremote_storage\u003C\u002Fcode\u003E would have the same interface\u002FAPI\u003C\u002Fli\u003E\n\u003Cli\u003EThe \u003Ccode\u003Eotherwise\u003C\u002Fcode\u003E keyword is similar to JavaScript&#39;s syntactic sugar for &#39;otherwise&#39;, aka \u003Ccode\u003Ex = value || defaultValue\u003C\u002Fcode\u003E. This is also a lot easier to read than other languages&#39; \u003Ccode\u003Ex = storage.get(key, &#39;default value&#39;)&#39;\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EThe \u003Ccode\u003Ethen\u003C\u002Fcode\u003E keyword is similar to bash&#39;s syntactic sugar for &#39;then execute the following statement if the previous condition returns true&#39;, aka \u003Ccode\u003E&amp;&amp;\u003C\u002Fcode\u003E. This is also somewhat similar to JavaScript&#39;s Promise that uses \u003Ccode\u003E.then(...)\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Etasks.update()\u003C\u002Fcode\u003E will recalculate the variable&#39;s value. We bind to \u003Ccode\u003Etasks\u003C\u002Fcode\u003E changes in \u003Ccode\u003E&lt;list&gt;\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EThe last line with \u003Ccode\u003Etemplate(task)=...\u003C\u002Fcode\u003E has an input value for the \u003Ccode\u003Etemplate\u003C\u002Fcode\u003E \u003Cem\u003Eattribute\u003C\u002Fem\u003E, which comes from the binded \u003Ccode\u003Etasks\u003C\u002Fcode\u003E. This automatically knows to iterates through \u003Ccode\u003Etasks\u003C\u002Fcode\u003E because it is in a \u003Ccode\u003Elist\u003C\u002Fcode\u003E \u003Cem\u003Eview\u003C\u002Fem\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EAs I was playing around, I really liked the feel of \u003Ccode\u003Estorage(key).add(value)\u003C\u002Fcode\u003E compared to my first thought of \u003Ccode\u003Estorage.append(key, value)\u003C\u002Fcode\u003E. We can now keep the verbs limited and more simple and matching the style of other data structures like list and set.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EThere is plenty more that we would want in an app like this, and I would expect the platform to handle most of it.\u003C\u002Fp\u003E\n\u003Cp\u003EFor example, \u003Cstrong\u003Epermissions\u003C\u002Fstrong\u003E for accessing the internet can easily be handled by the platform. So, I didn&#39;t have to explicitly code anything related to that.\u003C\u002Fp\u003E\n\u003Cp\u003EThe platform could easily handle \u003Cstrong\u003Ethemes\u003C\u002Fstrong\u003E too, like light and dark mode, or whatever custom colors that the user chooses.\u003C\u002Fp\u003E\n\u003Cp\u003EFuture thought experiments about this Anonsage language include:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EMulti-page\u003C\u002Fli\u003E\n\u003Cli\u003EFurther integration of logic and UI. We don&#39;t actually need \u003Ccode\u003Edefine:\u003C\u002Fcode\u003E and \u003Ccode\u003Eshow:\u003C\u002Fcode\u003E in the above code. I just put those labels there to potentially help understand the code faster.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EI&#39;ve spent enough time on this thought experiment yesterday and today. I will eventually return to this topic. And, if I hear feedback, then that will likely motivate me to think about this again sooner. Let me know if there are any other app examples that you would like to see in the Anonsage language. ;) \u003C\u002Fp\u003E\n\u003C!-- TODO: Fix link for analytics --\u003E\n\u003Cp\u003EInterested in learning more about this Anonsage language? \u003Ca href=\".\u002Fdev\"\u003EClick here\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n",title:"Thought Experiment: 1-File Apps (Part 2)",tags:["Thought Experiment","Language Design"],file:"2020-03-02-thought-experiment-one-file-apps--part-2.md",date:"2020-03-02",slug:"2020-03-02-thought-experiment-one-file-apps--part-2"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.709153bd.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.709153bd.js")}document.head.appendChild(s)</script> 