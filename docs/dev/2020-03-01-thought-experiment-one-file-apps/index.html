<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <meta content="Anonsage dev blog and cheat sheets" name=Description> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.2026142863.css rel=stylesheet><link href=client/[slug].02e45bb2.css rel=stylesheet><link href=client/client.a49aa4c4.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Thought Experiment: 1-File Apps</title><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-12i6fi0><ul class=svelte-12i6fi0><li class=svelte-12i6fi0><a href=. class=svelte-12i6fi0>home</a></li> <li class=svelte-12i6fi0><a href=dev class=svelte-12i6fi0 rel=prefetch aria-current=page>dev</a></li> <li class=svelte-12i6fi0><a href=random class=svelte-12i6fi0 rel=prefetch>random</a></ul></nav> <main class=svelte-x6rnam> <h1>Thought Experiment: 1-File Apps</h1> <small>2020-03-01</small> <div class="content svelte-1rnhflm"><p>Imagine a theoretical programming language that would allow us to create many types of apps, each in a single file (without getting too long, as simple as possible, no boilerplate code).</p> <p>Platforms that should be supported by this theoretical language:</p> <ul> <li>Browser extensions</li> <li>IDE plugins</li> <li>Operating system apps</li> <li>Web apps (pages)</li> <li>Mobile apps</li> <li>Console / Terminal / Shell</li> <li>Games?</li> </ul> <p>We aren't going to have something fully fleshed out today, but let's start for fun...</p> <p>At a minimum, things that every app needs (we'll add more features later):</p> <ul> <li>Title</li> <li>Description</li> <li>Author (person or company)</li> <li>Contact information</li> <li>Content<ul> <li>Media (text, images, videos, audio)</li> <li>Actions</li> <li>Styles</li> </ul> </li> </ul> <p>A simplified 1-file app could look something like the following:</p> <pre class=language-javascriptreact><code>title: My App
description: Do awesome things and stuff
author: My Name
contact: myemail@example.com
---
&lt;content here></code></pre><p>Now that we have that criteria listed, we can now simplify the list of needs...</p> <p>What if the author or contact information changes? We don't want to have to manually update every single app that we have created. So, perhaps a centralized location would be nice. This could be hosted by the developer console of the platform (browser, OS, mobile, package manager, ...)</p> <p>In fact, should we just remove all information that doesn't directly affect how users see and use the app? Once the app is downloaded, users need to be able to find the app by the title (at a minimum). The rest of the fields (description, author, contact) don't affect normal usage of the app. So, to simplify the overall view of our 1-file app:</p> <pre class=language-javascriptreact><code>title: My App
---
&lt;content here></code></pre><p>We really shouldn't simplify the header anymore than this. Note: This thought experiment isn't taking internationalization into account, we might want to handle all of that in a different file anyways.</p> <p>Now, about the app content. We need to show users <strong>media</strong> (text/images/video/audio) in a general <strong>layout</strong> with a default <strong>color</strong> theme defined by us developers. There's usually some <strong>interactions</strong> with the app, too. (Do we really have to define a color theme for users? That's a different discussion.) So, here's the basic one-file app layout now:</p> <pre class=language-javascriptreact><code>title: My App
---
&lt;defined media>

&lt;defined interactions>

&lt;layout>

&lt;color?></code></pre><p>We aren't going to stop here. So far, this could just be a regular HTML file, which can already be shown in just about all platforms. We are going to continue down this thought experiment to figure out what we <em>really</em> want in a simple app definition. So, for fun and a sneak peak, let's create a simple app using pseudo code rather than HTML+JavaScript+CSS. Here's a potential idea for a simple converter app:</p> <pre class=language-javascriptreact><code>title: Temperature Converter
---
define:
fahrenheit = celsius * 1.8 + 32

show:
<span class=hljs-string>'Fahrenheit:'</span> &lt;input id=fah <span class=hljs-built_in>type</span>=number <span class=hljs-built_in>bind</span>=solve(fahrenheit, celsius=cel)>
<span class=hljs-string>'Celsius:'</span> &lt;input id=cel <span class=hljs-built_in>type</span>=number <span class=hljs-built_in>bind</span>=solve(celsius, fahrenheit=fah)></code></pre><p>Here's what that could look like at a minimum:</p> <p><img alt="Simple temperature converter app" src=2020-03-23-thought-experiment-one-file-apps--temperature-converter.png title="Simple temperature converter app"></p> <details> <summary>The HTML version of the above would take about 5 times as much code to accomplish the same thing.</summary> <pre>
&lt;h1>Temperature Converter&lt;/h1>
&lt;form action="/do-conversion.php">
  &lt;label for="fah">Fahrenheit:&lt;/label>
  &lt;input type="text" id="fah" name="fah">
  &lt;label for="cel">Celsius:&lt;/label>
  &lt;input type="text" id="cel" name="cel">
  &lt;input type="submit" value="Submit">
&lt;/form></pre> </details> <p>Next, we are going to add an API call for remote data. And, to speed things up, we are also going to add local (or remote) storage, which can be used for user preferences or cache. Let's jump right in, then explain things later. The pseduo <a href=./2016-01-03-code-intuitiveness>code should be intuitive</a> enough.</p> <pre class=language-javascriptreact><code>title: My TODOs
theme: Material
---
define:
storage_key = <span class=hljs-string>'tasks'</span>
pref_key = <span class=hljs-string>'user_storage_type_pref'</span>
local_storage = platform.storage
remote_storage = url(https://example.com/api/storage)
user_storage = local_storage(pref_key) otherwise remote_storage(pref_key) otherwise local_storage
get_tasks() = user_storage(storage_key) otherwise mutable_list()
tasks = get_tasks()
save_task(value) = tasks.add(value) <span class=hljs-keyword>then</span> user_storage(storage_key).add(value)
remove_task(value) = tasks.remove(value) <span class=hljs-keyword>then</span> user_storage(storage_key).remove(value)
set_user_storage_type(storage_type) = local_storage(pref_key).<span class=hljs-built_in>set</span>(storage_type) <span class=hljs-keyword>then</span> remote_storage(pref_key).<span class=hljs-built_in>set</span>(storage_type) <span class=hljs-keyword>then</span> user_storage.update() <span class=hljs-keyword>then</span> tasks.update()

show:
&lt;checkbox text=<span class=hljs-string>'Use remote storage?'</span>
    on_check=set_user_storage_type(remote_storage)
    on_uncheck=set_user_storage_type(local_storage)>
&lt;input hint=<span class=hljs-string>'Add a task'</span> on_key_enter=save_task(input.text) width=full>
&lt;list <span class=hljs-built_in>bind</span>=tasks template(task)=`&lt;checkbox on_check=remove_task(task)> task`></code></pre><p>Here's what that could look like at a minimum:</p> <p><img alt="Simple TODO list with Material theme" src=2020-03-23-thought-experiment-one-file-apps--material-todo.png title="Simple TODO list with Material theme"></p> <p>Let's now look the above code one line (ish) at a time:</p> <ul> <li><code>local_storage = platform.storage</code> gets the local storage type specific for that platform. <code>platform</code> is a keyword here.</li> <li>Both <code>local_storage</code> and <code>remote_storage</code> would have the same interface/API</li> <li><code>otherwise</code> keyword is similar to JavaScript's syntactic sugar for 'otherwise', aka <code>x = value || defaultValue</code>. This is also a lot easier to read than other languages' <code>x = storage.get(key, 'default value')'</code></li> <li><code>then</code> keyword is similar to bash's syntactic sugar for 'then execute the following statement if the previous condition is true', aka <code>&&</code>. This is also somewhat similar to JavaScript's Promise that uses <code>.then(...)</code>.</li> <li><code>tasks.update()</code> will recalculate the variable's value. We bind to <code>tasks</code> changes in <code>&lt;list></code></li> <li>The last line with <code>template(task)=...</code> has an input value for the <code>template</code> <em>attribute</em>, which comes from the binded <code>tasks</code>. This automatically knows to iterates through <code>tasks</code> because it is in a <code>list</code> <em>view</em>.</li> <li>As I was playing around, I really liked the feel of <code>storage(key).add(value)</code> compared to my first thought of <code>storage.append(key, value)</code>. We can now keep the verbs limited and more simple and matching the style of other data structures like list and set.</li> </ul> <p>I've spent more than enough time on this thought experiment for today. I will eventually return to this topic. And, if I hear feedback, then that will likely motivate me to think about this again sooner. ;) </p> <p>Interested in learning more about this Anonsage language? <a href=./dev>Click here</a></p> </div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{html:"\u003Cp\u003EImagine a theoretical programming language that would allow us to create many types of apps, each in a single file (without getting too long, as simple as possible, no boilerplate code).\u003C\u002Fp\u003E\n\u003Cp\u003EPlatforms that should be supported by this theoretical language:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EBrowser extensions\u003C\u002Fli\u003E\n\u003Cli\u003EIDE plugins\u003C\u002Fli\u003E\n\u003Cli\u003EOperating system apps\u003C\u002Fli\u003E\n\u003Cli\u003EWeb apps (pages)\u003C\u002Fli\u003E\n\u003Cli\u003EMobile apps\u003C\u002Fli\u003E\n\u003Cli\u003EConsole \u002F Terminal \u002F Shell\u003C\u002Fli\u003E\n\u003Cli\u003EGames?\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EWe aren&#39;t going to have something fully fleshed out today, but let&#39;s start for fun...\u003C\u002Fp\u003E\n\u003Cp\u003EAt a minimum, things that every app needs (we&#39;ll add more features later):\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003ETitle\u003C\u002Fli\u003E\n\u003Cli\u003EDescription\u003C\u002Fli\u003E\n\u003Cli\u003EAuthor (person or company)\u003C\u002Fli\u003E\n\u003Cli\u003EContact information\u003C\u002Fli\u003E\n\u003Cli\u003EContent\u003Cul\u003E\n\u003Cli\u003EMedia (text, images, videos, audio)\u003C\u002Fli\u003E\n\u003Cli\u003EActions\u003C\u002Fli\u003E\n\u003Cli\u003EStyles\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EA simplified 1-file app could look something like the following:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Etitle: My App\ndescription: Do awesome things and stuff\nauthor: My Name\ncontact: myemail@example.com\n---\n&lt;content here&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ENow that we have that criteria listed, we can now simplify the list of needs...\u003C\u002Fp\u003E\n\u003Cp\u003EWhat if the author or contact information changes? We don&#39;t want to have to manually update every single app that we have created. So, perhaps a centralized location would be nice. This could be hosted by the developer console of the platform (browser, OS, mobile, package manager, ...)\u003C\u002Fp\u003E\n\u003Cp\u003EIn fact, should we just remove all information that doesn&#39;t directly affect how users see and use the app? Once the app is downloaded, users need to be able to find the app by the title (at a minimum). The rest of the fields (description, author, contact) don&#39;t affect normal usage of the app. So, to simplify the overall view of our 1-file app:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Etitle: My App\n---\n&lt;content here&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EWe really shouldn&#39;t simplify the header anymore than this. Note: This thought experiment isn&#39;t taking internationalization into account, we might want to handle all of that in a different file anyways.\u003C\u002Fp\u003E\n\u003Cp\u003ENow, about the app content. We need to show users \u003Cstrong\u003Emedia\u003C\u002Fstrong\u003E (text\u002Fimages\u002Fvideo\u002Faudio) in a general \u003Cstrong\u003Elayout\u003C\u002Fstrong\u003E with a default \u003Cstrong\u003Ecolor\u003C\u002Fstrong\u003E theme defined by us developers. There&#39;s usually some \u003Cstrong\u003Einteractions\u003C\u002Fstrong\u003E with the app, too. (Do we really have to define a color theme for users? That&#39;s a different discussion.) So, here&#39;s the basic one-file app layout now:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Etitle: My App\n---\n&lt;defined media&gt;\n\n&lt;defined interactions&gt;\n\n&lt;layout&gt;\n\n&lt;color?&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EWe aren&#39;t going to stop here. So far, this could just be a regular HTML file, which can already be shown in just about all platforms. We are going to continue down this thought experiment to figure out what we \u003Cem\u003Ereally\u003C\u002Fem\u003E want in a simple app definition. So, for fun and a sneak peak, let&#39;s create a simple app using pseudo code rather than HTML+JavaScript+CSS. Here&#39;s a potential idea for a simple converter app:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Etitle: Temperature Converter\n---\ndefine:\nfahrenheit = celsius * 1.8 + 32\n\nshow:\n\u003Cspan class=\"hljs-string\"\u003E'Fahrenheit:'\u003C\u002Fspan\u003E &lt;input id=fah \u003Cspan class=\"hljs-built_in\"\u003Etype\u003C\u002Fspan\u003E=number \u003Cspan class=\"hljs-built_in\"\u003Ebind\u003C\u002Fspan\u003E=solve(fahrenheit, celsius=cel)&gt;\n\u003Cspan class=\"hljs-string\"\u003E'Celsius:'\u003C\u002Fspan\u003E &lt;input id=cel \u003Cspan class=\"hljs-built_in\"\u003Etype\u003C\u002Fspan\u003E=number \u003Cspan class=\"hljs-built_in\"\u003Ebind\u003C\u002Fspan\u003E=solve(celsius, fahrenheit=fah)&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EHere&#39;s what that could look like at a minimum:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"2020-03-23-thought-experiment-one-file-apps--temperature-converter.png\" alt=\"Simple temperature converter app\" title=\"Simple temperature converter app\"\u003E\u003C\u002Fp\u003E\n\u003Cdetails\u003E\n  \u003Csummary\u003EThe HTML version of the above would take about 5 times as much code to accomplish the same thing.\u003C\u002Fsummary\u003E\n  \u003Cpre\u003E\n&lt;h1\u003ETemperature Converter&lt;\u002Fh1\u003E\n&lt;form action=\"\u002Fdo-conversion.php\"\u003E\n  &lt;label for=\"fah\"\u003EFahrenheit:&lt;\u002Flabel\u003E\n  &lt;input type=\"text\" id=\"fah\" name=\"fah\"\u003E\n  &lt;label for=\"cel\"\u003ECelsius:&lt;\u002Flabel\u003E\n  &lt;input type=\"text\" id=\"cel\" name=\"cel\"\u003E\n  &lt;input type=\"submit\" value=\"Submit\"\u003E\n&lt;\u002Fform\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdetails\u003E\n\n\u003Cp\u003ENext, we are going to add an API call for remote data. And, to speed things up, we are also going to add local (or remote) storage, which can be used for user preferences or cache. Let&#39;s jump right in, then explain things later. The pseduo \u003Ca href=\".\u002F2016-01-03-code-intuitiveness\"\u003Ecode should be intuitive\u003C\u002Fa\u003E enough.\u003C\u002Fp\u003E\n\u003Cpre class='language-javascriptreact'\u003E\u003Ccode\u003Etitle: My TODOs\ntheme: Material\n---\ndefine:\nstorage_key = \u003Cspan class=\"hljs-string\"\u003E'tasks'\u003C\u002Fspan\u003E\npref_key = \u003Cspan class=\"hljs-string\"\u003E'user_storage_type_pref'\u003C\u002Fspan\u003E\nlocal_storage = platform.storage\nremote_storage = url(https:\u002F\u002Fexample.com\u002Fapi\u002Fstorage)\nuser_storage = local_storage(pref_key) otherwise remote_storage(pref_key) otherwise local_storage\nget_tasks() = user_storage(storage_key) otherwise mutable_list()\ntasks = get_tasks()\nsave_task(value) = tasks.add(value) \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E user_storage(storage_key).add(value)\nremove_task(value) = tasks.remove(value) \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E user_storage(storage_key).remove(value)\nset_user_storage_type(storage_type) = local_storage(pref_key).\u003Cspan class=\"hljs-built_in\"\u003Eset\u003C\u002Fspan\u003E(storage_type) \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E remote_storage(pref_key).\u003Cspan class=\"hljs-built_in\"\u003Eset\u003C\u002Fspan\u003E(storage_type) \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E user_storage.update() \u003Cspan class=\"hljs-keyword\"\u003Ethen\u003C\u002Fspan\u003E tasks.update()\n\nshow:\n&lt;checkbox text=\u003Cspan class=\"hljs-string\"\u003E'Use remote storage?'\u003C\u002Fspan\u003E\n    on_check=set_user_storage_type(remote_storage)\n    on_uncheck=set_user_storage_type(local_storage)&gt;\n&lt;input hint=\u003Cspan class=\"hljs-string\"\u003E'Add a task'\u003C\u002Fspan\u003E on_key_enter=save_task(input.text) width=full&gt;\n&lt;list \u003Cspan class=\"hljs-built_in\"\u003Ebind\u003C\u002Fspan\u003E=tasks template(task)=`&lt;checkbox on_check=remove_task(task)&gt; task`&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EHere&#39;s what that could look like at a minimum:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"2020-03-23-thought-experiment-one-file-apps--material-todo.png\" alt=\"Simple TODO list with Material theme\" title=\"Simple TODO list with Material theme\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ELet&#39;s now look the above code one line (ish) at a time:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Elocal_storage = platform.storage\u003C\u002Fcode\u003E gets the local storage type specific for that platform. \u003Ccode\u003Eplatform\u003C\u002Fcode\u003E is a keyword here.\u003C\u002Fli\u003E\n\u003Cli\u003EBoth \u003Ccode\u003Elocal_storage\u003C\u002Fcode\u003E and \u003Ccode\u003Eremote_storage\u003C\u002Fcode\u003E would have the same interface\u002FAPI\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eotherwise\u003C\u002Fcode\u003E keyword is similar to JavaScript&#39;s syntactic sugar for &#39;otherwise&#39;, aka \u003Ccode\u003Ex = value || defaultValue\u003C\u002Fcode\u003E. This is also a lot easier to read than other languages&#39; \u003Ccode\u003Ex = storage.get(key, &#39;default value&#39;)&#39;\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Ethen\u003C\u002Fcode\u003E keyword is similar to bash&#39;s syntactic sugar for &#39;then execute the following statement if the previous condition is true&#39;, aka \u003Ccode\u003E&amp;&amp;\u003C\u002Fcode\u003E. This is also somewhat similar to JavaScript&#39;s Promise that uses \u003Ccode\u003E.then(...)\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Etasks.update()\u003C\u002Fcode\u003E will recalculate the variable&#39;s value. We bind to \u003Ccode\u003Etasks\u003C\u002Fcode\u003E changes in \u003Ccode\u003E&lt;list&gt;\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EThe last line with \u003Ccode\u003Etemplate(task)=...\u003C\u002Fcode\u003E has an input value for the \u003Ccode\u003Etemplate\u003C\u002Fcode\u003E \u003Cem\u003Eattribute\u003C\u002Fem\u003E, which comes from the binded \u003Ccode\u003Etasks\u003C\u002Fcode\u003E. This automatically knows to iterates through \u003Ccode\u003Etasks\u003C\u002Fcode\u003E because it is in a \u003Ccode\u003Elist\u003C\u002Fcode\u003E \u003Cem\u003Eview\u003C\u002Fem\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EAs I was playing around, I really liked the feel of \u003Ccode\u003Estorage(key).add(value)\u003C\u002Fcode\u003E compared to my first thought of \u003Ccode\u003Estorage.append(key, value)\u003C\u002Fcode\u003E. We can now keep the verbs limited and more simple and matching the style of other data structures like list and set.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EI&#39;ve spent more than enough time on this thought experiment for today. I will eventually return to this topic. And, if I hear feedback, then that will likely motivate me to think about this again sooner. ;) \u003C\u002Fp\u003E\n\u003C!-- TODO: Fix link for analytics --\u003E\n\u003Cp\u003EInterested in learning more about this Anonsage language? \u003Ca href=\".\u002Fdev\"\u003EClick here\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n",title:"Thought Experiment: 1-File Apps",tags:["Thought Experiment","Dev Design"],file:"2020-03-01-thought-experiment-one-file-apps.md",date:"2020-03-01",slug:"2020-03-01-thought-experiment-one-file-apps"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.a49aa4c4.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.a49aa4c4.js")}document.head.appendChild(s)</script> 